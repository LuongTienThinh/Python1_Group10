<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %} Django BlogIT {% endblock %}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <style>
      .navbar-toggler:focus {
        box-shadow: none;
      }
      .dropdown-menu {
        left: auto !important;
        position: absolute !important;
        right: 0;
      }
      .dropdown .btn, .nav .nav-link {
        box-shadow: none;
        color: #ffffff;
      }
      .user-info-left {
        display: inline-block;
      }
      .user-info-right {
        display: none;
      }
      .main-content {
        width: 60%;
      }
      @media screen and (min-width: 992px) {
        .user-info-left {
          display: none;
        }
        .user-info-right {
          display: inline-block;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'index' %}">Home</a>
        <!-- <a class="navbar-brand" href="{% url 'index' %}">Home</a> -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="user-info user-info-left">
          {% if user.is_authenticated %}
          <div class="dropdown">
            <button class="btn btn-user-info dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              {{ user.username }}
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'profile' %}">Profile</a></li>
              <li><a class="dropdown-item" href="{% url 'password_change' %}">Change Password</a></li>
              <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
            </ul>
          </div>
          {% else %}
          <li class="nav">
            <a class="nav-link" href="{% url 'login' %}">Login</a>
            <a class="nav-link" href="{% url 'register' %}">Register</a>
          </li>
          {% endif %}
        </div>
        <div class="collapse navbar-collapse justify-content-between" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            {% if user.is_superuser %}
            <a
              class="nav-link active"
              aria-current="page"
              href="{% url 'admin' %}"
            >
              Admin
            </a>
           
            {% endif %}
            <!-- Category menu -->
            {% if cat_menu %}
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                Categories
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                {% for item in cat_menu %}
                <li>
                  <a class="dropdown-item" href="{%  url 'category' item|slugify %}">
                    {{ item }}
                  </a>
                </li>
                {% endfor %}
              </ul>
            </li>
            <!-- {% else %}
            <a class="nav-link" href="{% url 'category-list' %}">Category List</a> -->
            {% endif %}
            <li class="nav">
              {% if user.is_authenticated and user.is_superuser %}
              <a class="nav-link" href="{% url 'add_post' %}">Add Post</a>
              <a class="nav-link" href="{% url 'add_category' %}">Add Category</a>
              {% endif %}
            </li>

<!-- search -->
            <form class="d-flex justify-content-center mx-5" action="{% url 'search_posts' %}" method="get">
              <input class="form-control me-2" name="search" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success text-white border-light" type="submit">Search</button>
            </form>

          </div>
        </div>

        <!-- user info -->
        <div class="user-info user-info-right">
          {% if user.is_authenticated %}
          <div class="dropdown">
            <button class="btn btn-user-info dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              {{ user.username }}
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'password_change' %}">Change Password</a></li>
              <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
            </ul>
          </div>
          {% else %}
          <li class="nav">
            <a class="nav-link" href="{% url 'login' %}">Login</a>
            <a class="nav-link" href="{% url 'register' %}">Register</a>
          </li>
          {% endif %}
        </div>
      </div>
    </nav>
    <div class="d-flex justify-content-between mx-3">
      <div class="left-nav">
        <h3 class="text-center mx-1 py-4 ">Category List</h3>
        {% for item in cat_menu %}

        <h5><a class="dropdown-item" href="{%  url 'category' item|slugify %}">
          <div class="card-body">
             {{ item }}
            </div>
            
            </a></h5>
        {% endfor %}
        
      </div>
      <div class="main-content">
        {% block content %} {% endblock %}
      </div>
      <div class="right-nav">
        <h2 class="text-center mx-1 py-4 ">Lastest Post </h2>
        {% for post in latest_posts %}

        <div class="card mt-4">
          <div class="card-body">
            <div class="post-info d-flex justify-content-between">
              <div class="card-title d-flex align-items-end text-capitalize">
                <a href="{% url 'article_details' post.pk %}" class="post-title text-dark text-decoration-none h4 m-auto">{{ post.title }}</a>
              </div>
              <div class="author-info">
                  {{ post.author.first_name }} {{ post.author.last_name }} - {{ post.post_date }}
              </div>
            </div>
            <div class="action d-flex justify-content-between align-items-center">
              <div class="react d-flex">
                <div class="like">
                  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.1s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16H286.5c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8H384c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32H96c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32H32z"/></svg>
                  <span class="count">{{ post.total_likes }}</span>
                  <span class="title">Like</span>
                </div>
                <div class="comment">
                  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M123.6 391.3c12.9-9.4 29.6-11.8 44.6-6.4c26.5 9.6 56.2 15.1 87.8 15.1c124.7 0 208-80.5 208-160s-83.3-160-208-160S48 160.5 48 240c0 32 12.4 62.8 35.7 89.2c8.6 9.7 12.8 22.5 11.8 35.5c-1.4 18.1-5.7 34.7-11.3 49.4c17-7.9 31.1-16.7 39.4-22.7zM21.2 431.9c1.8-2.7 3.5-5.4 5.1-8.1c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208s-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6c-15.1 6.6-32.3 12.6-50.1 16.1c-.8 .2-1.6 .3-2.4 .5c-4.4 .8-8.7 1.5-13.2 1.9c-.2 0-.5 .1-.7 .1c-5.1 .5-10.2 .8-15.3 .8c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c4.1-4.2 7.8-8.7 11.3-13.5c1.7-2.3 3.3-4.6 4.8-6.9c.1-.2 .2-.3 .3-.5z"/></svg>
                  <span class="count">{{ post.total_comment }}</span>
                  <span class="title">Comments</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
        
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"
  ></script>
</html>
